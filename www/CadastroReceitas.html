<!DOCTYPE html>
<html>
<head>
   <title>Cadastro de Receitas</title>
   <meta charset="utf-8">
   <meta name="viewport" content="width=device-width, initial-scale=1">

   <link rel="stylesheet" type="text/css" href="font-awesome/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="Framework7/css/framework7.material.material.css">

   <link rel="stylesheet" type="text/css" href="jquery/jquery.mobile-1.4.5.min.css"/>
   <link rel="stylesheet" type="text/css" href="jquery/jquery-ui.min.css"/>

   <link rel="stylesheet" type="text/css" href="jquery/custom-theme.min.css"/>
   <link rel="stylesheet" type="text/css" href="jquery/jquery.mobile.icons.min.css"/>
   <link rel="stylesheet" type="text/css" href="jquery/jquery.mobile.structure-1.4.5.min.css"/>

   <link rel="stylesheet" href="css/my-app.css">
</head>
<body>
   <div data-role="page" data-theme="b">
      <div data-role="header">
         <a href="index.html" data-icon="back" data-rel="back" data-iconpos="notext"></a>
         <h5>Economy +</h5>
      </div>
      <div data-role="content" >

         <div data-role="fieldcontain">
            <fieldset data-role="controlgroup" data-type="horizontal" data-mini="true">
               <legend>Tipo</legend>
               <input type="radio" name="radio-receita-despesa" id="radio-despesa" value="despesa" checked="checked" onclick="CarregarCategoria(1);">
               <label for="radio-despesa">Despesa</label>
               <input type="radio" name="radio-receita-despesa" id="radio-receita" value="receita" onclick="CarregarCategoria(2);">
               <label for="radio-receita">Receita</label>
            </fieldset>
         </div>

         <div data-role="fieldcontain">
            <label for="select-categoria" class="select">Categoria</label>
            <select name="select-categoria" id="select-categoria" data-native-menu="false" data-mini="true">
            </select>
         </div>

         <div data-role="">
           <label for="txtData">Data</label>  
           <input id="txtData" name="txtData" type="text" />
         </div>

         <div data-role="">
           <label for="txtValor">Valor (R$)</label>  
           <input type="number" name="txtValor" pattern="[0-9]*" id="txtValor" value="0,00">
         </div>

         <div data-role="">
           <label for="txtQtdParcela">Qtde. Parcelas</label>  
           <input type="number" name="txtQtdParcela" pattern="[0-9]*" id="txtQtdParcela" value="1">
         </div>

         <div data-role="fieldcontain">
           <label for="txtObservacao">Observação</label>  
           <textarea cols="40" rows="8" name="txtObservacao" id="txtObservacao" ></textarea>
         </div>                    
                     
         <input type="button" value="Cadastrar" onclick="CadastrarReceitaDespesa()">

      </div>
   </div>

   <script type="text/javascript" src="cordova.js"></script>

   <script type="text/javascript" charset="utf-8" src="jquery/jquery-1.11.3.min.js"></script>
   <script type="text/javascript" charset="utf-8" src="jquery/jquery.mobile-1.4.5.min.js"></script>
   <script type="text/javascript" charset="utf-8" src="jquery/jquery-ui.min.js"></script>
   
   <script type="text/javascript" src="js/my-app.js"></script>
   <script type="text/javascript" src="js/my-app-banco.js"></script>

   <script type="text/javascript" src="Framework7/js/framework7.min.js"></script>

   <script type="text/javascript">

      $( "#txtData" ).datepicker({
         dateFormat: "dd/mm/yy"
      });

      function CarregarCategoria(tipo){
        var resultado = function(result) {
          $('#select-categoria').empty();
          var sltTipoPagamentoDespesa = document.getElementById("select-categoria");
          for (var i = 0; i < result.length; i++){
            sltTipoPagamentoDespesa.options[i] = new Option(result[i].Descricao, result[i].Id);
          }
          $("#select-categoria").selectmenu("refresh", true);
        };

        BuscarCategoria(resultado, tipo);
      }

      function CadastrarReceitaDespesa(){
         var id = 0; // pois esta salvando, quando editar passa o id
         var tipo = $('#select-tipo').val(); // receita ou despesa
         var categoria = $('#select-categoria').val(); // id da categoria
         var valor = $('#txtValor').val();
         var data = $('#txtData').val();
         var qtdParcelas = $('#txtQtdParcela').val();
         var observacao = $('#txtObservacao').val();

         alert(id + "\n" + tipo + "\n" + categoria + "\n" + valor + "\n" + data + "\n" + qtdParcelas + "\n" + observacao);

         //SalvarReceitaDespesa(id, tipo, categoria, valor, data, qtdParcelas, observacao);
      }

   </script>

</body>
</html>